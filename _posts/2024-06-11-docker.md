---
layout: post
title: 11-06-2024
---  
#               DOCKER

- Docker is a powerful tool used for developing, packaging, and deploying applications efficiently. 
- Docker is a container management service. It is open-source and available for different platforms like Windows, macOS, and Linux. Docker is quickly shipping, testing, and deploying code.
- Docker containers use a shared operating system and only include the necessary dependencies, making them much smaller and faster to start than traditional virtual machines. 

# Docker Architecture

![](../images/Architecture-of-Docker.png)

# Installing docker on linux
{% highlight ruby %}
 sudo apt update
 sudo apt install docker.io -y
 docker --version
{% endhighlight %}

# Docker Containerization
- Docker is the containerization platform that is used to package your application and all its dependencies together in the form of containers to make sure that your application works seamlessly in any environment which can be developed or tested or in production. Docker is a tool designed to make it easier to create, deploy, and run applications by using containers. 

# Containerization
- Containerization is OS-based virtualization that creates multiple virtual units in the userspace, known as Containers. Containers share the same host kernel but are isolated from each other through private namespaces and resource control mechanisms at the OS level. 

# Components of Docker
 1. Docker Clients and Servers – Docker has a client-server architecture. The Docker Daemon/Server consists of all containers.
 2. Docker Images– Docker images are used to build docker containers 
 3. DockerFile– Dockerfile is a text file that contains a series of instructions on how to build your Docker image.
 4. Docker Registries– Docker Registry is a storage component for Docker images. 
 5. Docker Containers– Docker Containers are runtime instances of Docker images


 # Objects of docker
   1. docker volume
   2. docker network
   3. docker swarm
     
# Docker commands
 {% highlight ruby %}
 1. docker run -d -p <port_on_host>:<port_on_container> Container_name   //The docker run command is a combination of the docker create and docker start commands. It creates a new container from the image specified and starts that container.

 
 2. docker exec -dit mycontainer sh                    //This starts a new shell session in the container mycontainer.  
 3. Docker Pull-This command allows you to pull any image which is present in dockerhub 
 4. docker ps - to list the containers on the machine
 5. docker images- to list all the images
 6. docker login -Docker login command will help you to authenticate with the Docker hub by which you can push and pull your images.
 7. docker build -t image_name:tag -The docker build command is used to build the docker images with the help of Dockerfile.
 8. docker stop container_name_or_id - to stop the running container
 9. docker restart container_name_or_id - to restart the container
 10. docker rmi <image ID/ image name> - To delete the image in docker. 
 11. docker commit <container name> <image name> //to create image from running container
 12. docker build -t <image name > . //to create image from dockerfile
{% endhighlight %}


# Dockerfile
- dockerfile is basically a text file,it contains some set of instructions

**Dockerfile**
- # components of docker file
- FROM : It is for base image, it should be at the top of dockerfile
- RUN : It to execute the instructions,it will create layers in dockerfile
- MAINTAINER : author of dockerfile
- COPY : copy file from local system
- ADD : It provide a feature to download file from internet & also will extract it on container
- EXPOSE : TO expose ports
- WORKDIR : TO set working directory in container
- CMD : Execute commands during container creation
- ENTRYPOINT : It is like cmd but when any command is return in entrypoint priority will be given to the command return in entrypoint
- ENV : Environment variable

{% highlight ruby %}
# Example of a dockerfile
FROM ubuntu
RUN echo "hello everyone" > /tmp/test
WORKDIR /tmp
COPY /testdocker /tmp/new

#Commands to build image from dockerfile and run the container
docker build -t <image name> .
docker run -it --name <container name>  <image name> /bin/bash
{% endhighlight %}

# DOCKER VOLUME

- Docker Volumes are a popular and effective method for assuring data permanence while working in containers. Docker volumes are file systems that are mounted on Docker containers to preserve the data generated by the container.
- for docker volume we have to make a directory & it will behave like a docker volume.
- Even after the deletion of container the docker volume remains.
- We can share docker volume between host and container or between two containers.
- Even when the container is closed we can access the volume


{% highlight ruby %}
 # command to create docker volume
 docker volume create <volume-name>
 docker volume ls
 docker volume inspect <volume-name>
 docker volume rm <volume-name>
 docker volume prune   //remove all unused volumes from the host
{% endhighlight %}

- default directory for volume  /var/lib/docker/volumes
 {% highlight ruby %}
 //command to attach a volume from host to container
 docker run -it --name <containername> -v /path_on_host:/path to container
// To attach Docker Volume From Container To Another Container
docker run -itd --volumes-from existing_container_name --name new_container_name image_name
{% endhighlight %}
   

# DOCKER NETWORKS
- A network is a group of two or more devices that can communicate with each other either physically or virtually.
- Containers inside the Docker Network can talk to each other by sharing packets of information.
**commands to create network**
- docker network ls
- docker network create <network name>
- docker network inspect <network name>
- docker run -it --network <network name> --name <containername> image_name   

**network drivers**
- Bridge network-Bridge networks apply to containers running on the same Docker daemon host,bridge network can work on the same ip range 
- None network - IP addresses won’t be assigned to containers. These containments are not accessible to us from the outside or from anyother   container.
- Host network - Remove network isolation between the container and the Docker host, and use the host's networking directly. 



# DOCKER-COMPOSE
- Docker-compose is a tool which can build infrastructure.
- we can start muliple services with a single file.
- Docker-compose file is written in yaml format
- To run docker-compose we have to create a file with name docker-compose and extension (.yaml)
- Confriguration file- /usr/local/bin/docker-compose
- docker-compose is a tool for defining and running multi-containers docker applications

 **commands to run docker-compose file**
{% highlight ruby %}
  docker-compose up   
  docker-compose down
  docker-compose up-d
  docker-compose up -d --scale servicename=no
{% endhighlight %}


{% highlight ruby %}
version: '3'
services:
  web:
    image: "nginx:latest" 
    ports:
      - 80:80
    volumes:
      - vol1: /web/ 
    networks:
       net1:  
  Java:
    image:"tomcat:latest"
    ports:
     - 8080:8080
     volumes:
      - vol2: /java/
     networks:
       net2: 
networks:
    net1:
     - driver:bridge
    net2:
     - driver:bridge
volumes:
   vol1:
   vol2:             
{% endhighlight }

